!function(e){"use strict";var l={i:"00000000",n:"全部服务",c:[{i:"11000000",n:"学习服务"},{i:"99000000",n:"其他"}]},t={data:{},cssClass:{labels:"labels",label:"label",selected:"label-fill",disabled:"disabled"},input:{name:"other",cssClass:"form-control",placeholder:""},test:function(e){return/^(\d)*99(\d)*$/.test(e)},type:"json",fieldMap:{code:"i",title:"n"},valueField:"code",labelField:"title",items:[],selectOnTab:!0,onClick:function(e){},onChange:function(e,l){}};e.fn.selectizeLabel=function(a){function s(e){for(var l={},t=0;t<e.length;t++)l[e[t][a.fieldMap[a.valueField]]]={v:e[t],m:e[t].c?s(e[t].c):{}};return l}return this.each(function(){function n(e){return e&&e.split(" ").map(function(e){return"."+e}).join("")}function i(l,t){function s(l){if(l.target){var t=e(l.target);t.hasClass(a.cssClass.label)&&!t.hasClass(a.cssClass.selected)&&(e(this).trigger("change"),a.onClick&&"function"==typeof a.onClick&&a.onClick.call(this,l))}}var c=l.v,r=e('<div class="'+a.cssClass.labels+'"></div>');if(r.bind("change",function(l){if(l.target){var t=e(l.target);if(t.hasClass(a.cssClass.label)&&!t.hasClass(a.cssClass.selected)){var s=e(l.currentTarget),c=t.data("value"),r=t.data("level");s.find(n(a.cssClass.label)).removeClass(a.cssClass.selected),t.addClass(a.cssClass.selected);for(var o=r+1;o<u.$selectize.length;o++)delete u.$selectize[o];u.$selectize[r]=c,s.nextAll(n(a.cssClass.labels)).remove();var d=i(c,r+1);d&&d.appendTo(u),a.onChange&&"function"==typeof a.onChange&&a.onChange.call(this,u,l)}}}),a.test&&"function"==typeof a.test&&a.test(c.i)){var o=e('<input class="'+a.input.cssClass+'" name="'+a.input.name+'" placeholder="'+a.input.placeholder+'" data-label="'+a.input.name+"_"+c.i+'"/>');return o.data("level",t),o.appendTo(r),r}if(c.c&&c.c.length>0){var d=l.m;for(var f in d){var v=e('<span class="'+a.cssClass.label+'">'+d[f].v.n+"</span>");v.data("value",d[f]),v.data("level",t),v.appendTo(r),r.append(" "),v.click(s)}return r}return null}a.data||(a.data=l),a=e.extend(!0,{},t,a);var c=a.data,r=s([c]),u=e(e(this)[0]);u.$selectize=[];for(var o in r){var d=i(r[o],0);d&&d.appendTo(u)}u.selectedObject=function(){return this.$selectize?this.$selectize.map(function(e){return e&&e.v}).filter(function(e){return e?e:void 0}):null},u.selectedValue=function(){return this.$selectize?this.$selectize.map(function(e){return e&&e.v[a.fieldMap[a.valueField]]}).filter(function(e){return e?e:void 0}):null},u.selectedLabel=function(){return this.$selectize?this.$selectize.map(function(e){return e&&e.v[a.fieldMap[a.labelField]]}).filter(function(e){return e?e:void 0}):null}})}}(jQuery);